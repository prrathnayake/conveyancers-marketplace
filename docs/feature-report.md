# Feature Gap Assessment

This document benchmarks the current codebase against the requested feature catalogue. Status values are:

- **Available** – implemented in code or configuration.
- **Partial** – scaffolded or simulated, but missing critical integrations or automation.
- **Missing** – no supporting implementation beyond documentation intent.

## Detailed Matrix

| Category | Feature / Module | Status | Evidence & Gap Summary |
| --- | --- | --- | --- |
| User Onboarding & Identity | Multi-Role Registration | Missing | Identity service only exposes a profile search endpoint backed by static data; there are no signup, role provisioning, or verification flows yet.【F:backend/services/identity/main.cpp†L24-L113】 |
| User Onboarding & Identity | Know-Your-Customer (KYC) | Missing | Profiles are hard-coded with no linkage to external KYC/AML providers or webhook handling, leaving compliance workflows unimplemented.【F:backend/services/identity/main.cpp†L24-L30】 |
| User Onboarding & Identity | Two-Factor Authentication (2FA) | Missing | Shared security helper validates API keys and roles only; there is no second-factor challenge for any actor types.【F:backend/common/security.h†L16-L45】 |
| Conveyancer Profile Management | Profile Creation | Missing | Because the identity API is read-only, conveyancers cannot create or update rich profiles through the current service surface.【F:backend/services/identity/main.cpp†L83-L113】 |
| Conveyancer Profile Management | Licence & Insurance Verification | Available | Licence numbers and PI insurance details are cross-checked against an embedded registry before ConveySafe badges are issued, with failed matches revoking verification timestamps and raising alerts.【F:backend/services/identity/main.cpp†L120-L210】【F:backend/services/identity/main.cpp†L660-L724】 |
| Conveyancer Profile Management | Geographic Restrictions | Partial | Hard-coded guardrails prevent unverified QLD/ACT practitioners from appearing, yet full jurisdiction gating and admin overrides are absent.【F:backend/services/identity/main.cpp†L42-L109】 |
| Search & Discovery | Directory & Filters | Available | `/profiles/search` supports keyword, state, and verified filters with JSON responses designed for directory listings.【F:backend/services/identity/main.cpp†L83-L113】 |
| Search & Discovery | Profile View | Partial | Search payloads expose basic verification flags but omit historical jobs, ratings, or document badges envisioned for full bios.【F:backend/services/identity/main.cpp†L64-L113】 |
| Search & Discovery | SEO & CMS | Partial | The README confirms SSR-ready Next.js and an admin console scaffold, yet there is no CMS editing or SEO metadata governance described in code.【F:README.md†L30-L35】 |
| Communication & Document Exchange | Secure Messaging | Available | Marketplace clients exchange encrypted chat threads with policy-aware warnings that flag emails/phone numbers, log ConveySafe alerts, and keep evidence inside the platform.【F:frontend/pages/api/chat/messages.ts†L1-L134】【F:frontend/pages/chat.tsx†L1-L226】 |
| Communication & Document Exchange | Contact Gating | Available | Job contact endpoints keep buyer/seller details masked until a finance admin submits the scoped unlock token produced during payment hold creation, ensuring contact is only revealed after funds are initiated.【F:backend/services/payments/main.cpp†L767-L796】【F:backend/services/jobs/main.cpp†L950-L1518】 |
| Communication & Document Exchange | Voice & Video Sessions | Available | Parties can spin up voice or video sessions directly on a job, with generated join URLs, scoped access tokens, and admin-visible logs of every call session for oversight.【F:backend/services/jobs/main.cpp†L600-L1576】 |
| Communication & Document Exchange | File Upload & Scanning | Partial | Participants can upload documents through the secure chat flow with at-rest encryption, yet no antivirus scanning or external storage tier is wired in.【F:frontend/pages/api/chat/upload.ts†L1-L95】 |
| Communication & Document Exchange | Electronic Signatures | Missing | Documents carry a `requires_signature` flag without any DocuSign/AdobeSign orchestration or audit trail persistence.【F:backend/services/jobs/main.cpp†L30-L195】 |
| Job Management | Job Creation | Available | `/jobs` now accepts POST payloads that persist conveyancer-led engagements, seed milestones, and immediately apply contact masking policies for each new matter.【F:backend/services/jobs/main.cpp†L349-L395】【F:backend/services/jobs/main.cpp†L1127-L1145】 |
| Job Management | Milestones & Quotes | Partial | Milestone structures with escrow indicators are available, yet quote authoring, deadline workflows, and notifications are not automated.【F:backend/services/jobs/main.cpp†L52-L281】 |
| Payments & Escrow | Escrow Setup | Available | Escrow holds now capture the responsible conveyancer, surface loyalty fee rates, and feed ConveySafe SecurePay and loyalty tier endpoints for economic lock-in.【F:backend/services/payments/main.cpp†L67-L115】【F:backend/services/payments/main.cpp†L640-L813】 |
| Payments & Escrow | Trust Account Payouts | Partial | Release endpoints transition holds to a released state, but there is no linkage to conveyancer trust accounts or compliance reporting.【F:backend/services/payments/main.cpp†L233-L259】 |
| Payments & Escrow | Invoicing & Fees | Missing | Payment flows stop at hold/release/refund and never generate GST-compliant invoices or fee breakdowns.【F:backend/services/payments/main.cpp†L179-L287】 |
| Work Execution | Task Tracking | Available | A reusable template library seeds jurisdiction-specific task bundles that can be applied to any job, generating due-dated milestones with escrow requirements and assignment metadata.【F:backend/services/jobs/main.cpp†L248-L268】【F:backend/services/jobs/main.cpp†L629-L1688】 |
| Work Execution | Document Management | Partial | Document listings with status metadata exist, yet version control, encryption policies, and access checks are not wired in.【F:backend/services/jobs/main.cpp†L30-L324】 |
| Completion & Feedback | Job Completion | Available | Conveyancers can close jobs through `/jobs/{id}/complete`, triggering compliance summaries, certificate generation, and last-activity timestamps for audit trails.【F:backend/services/jobs/main.cpp†L558-L604】【F:backend/services/jobs/main.cpp†L1363-L1382】 |
| Completion & Feedback | Verified Completion Certificates | Available | Completion triggers issue a system-signed certificate with download URL and verification code, retrievable via a dedicated endpoint and surfaced in the admin safety dashboard.【F:backend/services/jobs/main.cpp†L939-L1595】【F:admin-portal/pages/safety.tsx†L1-L264】 |
| Completion & Feedback | Reviews & Ratings | Missing | Profile payloads omit any rating or review fields, and no review endpoints are defined in the services.【F:backend/services/identity/main.cpp†L64-L109】 |
| Dispute & Support | Dispute Workflow | Available | Disputes can now be opened, listed, and resolved with evidence attachments, with admin-only status transitions for adjudication.【F:backend/services/jobs/main.cpp†L469-L1463】 |
| Dispute & Support | Customer Support | Missing | There is no administrative API for impersonation, KYC overrides, or 2FA resets beyond descriptive documentation.【F:backend/services/identity/main.cpp†L83-L113】 |
| Admin Panel | User Management | Partial | The README references an admin console scaffold, but backend APIs for verifying/deactivating users are not implemented.【F:README.md†L30-L35】【F:backend/services/identity/main.cpp†L83-L113】 |
| Admin Panel | Safety Dashboard | Available | A dedicated safety surface summarises contact gating, certificate issuance, voice/video calls, and ML risk signals pulled from the jobs service for admin-only oversight.【F:admin-portal/components/AdminLayout.tsx†L6-L32】【F:admin-portal/pages/safety.tsx†L1-L264】 |
| Admin Panel | Enquiry Audit Search | Available | Admin operators can search chat transcripts, review participants, and download attachments directly from the control panel when handling escalations.【F:admin-portal/pages/enquiries.tsx†L1-L162】【F:admin-portal/pages/api/enquiries.ts†L1-L161】 |
| Admin Panel | Compliance Monitoring | Available | Identity service now surfaces `/admin/compliance/alerts` with jurisdiction, insurance, and verification warnings for admins.【F:backend/services/identity/main.cpp†L642-L689】【F:backend/services/identity/main.cpp†L324-L366】 |
| Admin Panel | Audit Logging | Partial | Services log request metadata via shared helpers, but immutable append-only audit storage is not in place.【F:backend/common/security.h†L26-L45】 |
| Infrastructure & Architecture | Frontend | Partial | The README outlines a Next.js + Tailwind stack fronted by Nginx, yet feature depth (filters, chat UI, CMS) is not verifiable in code excerpts.【F:README.md†L30-L47】 |
| Infrastructure & Architecture | Backend Microservices | Available | Gateway plus identity, jobs, and payments services are documented and implemented with REST endpoints.【F:README.md†L36-L41】【F:backend/services/jobs/main.cpp†L235-L334】【F:backend/services/payments/main.cpp†L179-L293】 |
| Infrastructure & Architecture | Databases | Partial | Compose targets for Postgres/Redis/MinIO are described, but runtime code still uses in-memory stores pending real adapters.【F:README.md†L43-L47】【F:backend/services/jobs/main.cpp†L52-L117】【F:backend/services/payments/main.cpp†L59-L125】 |
| Infrastructure & Architecture | Observability | Partial | Observability stack is documented, yet service code lacks explicit OpenTelemetry exporters or metrics emission.【F:README.md†L43-L47】【F:README.md†L197-L199】 |
| Infrastructure & Architecture | Deployment | Available | Docker Compose workflow with TLS scripts and env templates is fully documented for local deployment.【F:README.md†L91-L166】 |
| Security & Compliance | Authentication | Partial | API key plus role headers enforce basic RBAC, but JWT issuance and refresh token lifecycles are absent.【F:backend/common/security.h†L16-L45】 |
| Security & Compliance | Data Security | Partial | Sensitive runtime secrets have been externalised into environment configuration and the frontend now fails fast when `JWT_SECRET` is unset, but transport encryption and at-rest controls remain unimplemented.【F:infra/.env.example†L1-L32】【F:frontend/lib/session.ts†L20-L29】 |
| Security & Compliance | Privacy | Missing | Code lacks consent capture, erasure workflows, or privacy policy acknowledgements beyond high-level notes.【F:backend/services/identity/main.cpp†L83-L113】 |
| Security & Compliance | Licensing & Trust Compliance | Partial | Documentation highlights state restrictions and escrow best practices, but automated validation and trust account reconciliation are not implemented.【F:docs/compliance.md†L1-L5】【F:backend/services/payments/main.cpp†L233-L287】 |
| Security & Compliance | Record Retention | Available | Administrators can invoke `/admin/audit/purge` to enforce audit log retention windows programmatically.【F:backend/services/identity/main.cpp†L690-L708】【F:backend/services/identity/main.cpp†L344-L366】 |
| Security & Compliance | Off-Platform Leakage Monitoring | Available | The jobs service aggregates ML heuristics across message metadata, payment activity, retention, and IP pairings to flag probable off-platform handoffs via `/admin/ml/insights`.【F:backend/services/jobs/main.cpp†L671-L1712】 |
| Performance & Monitoring | Metrics & Alerts | Available | Shared security helpers track request counters and auth failures, exposing Prometheus-formatted metrics behind `/metrics` on every service.【F:backend/common/security.h†L118-L213】【F:backend/services/jobs/main.cpp†L471-L476】【F:backend/gateway/src/main.cpp†L48-L52】 |
| Performance & Monitoring | Logging & Tracing | Partial | Basic request logging is enabled, though distributed tracing identifiers or secure log retention are not wired up.【F:backend/common/security.h†L26-L45】 |

## Key Recommendations

1. Prioritise identity and compliance foundations (registration, KYC, 2FA) to unlock onboarding flows before extending job automation.
2. Replace in-memory fixtures with persistent adapters for profiles, jobs, documents, and payments so that observability and retention controls become meaningful.
3. Layer dedicated services or integrations for DocuSign/AdobeSign, PSP escrow, and anti-virus scanning to deliver the regulated experience outlined in the requirements.
